<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Machine Condition Monitoring</title>
    <link rel="stylesheet" href="dashboard.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
</head>
<body>
    <!-- Navigation Bar -->
    <div class="navbar">
        <a href="#" class="nav-link">Home</a>
        <a href="#components-section" class="nav-link analytics-btn">
            <span class="btn-text">Analytics</span>
            <span class="btn-icon">üìä</span>
        </a>
        <a href="#accelerometer-section" class="nav-link accel-data-btn">
            <span class="btn-text">Accelerometer Data</span>
            <span class="btn-icon">üìà</span>
        </a>
    </div>

    <!-- Main Content -->
    <div class="content-container">
        <!-- Component Cards Section -->
        <section id="components-section" class="components-container">
            <h2 class="section-title">System Components Status</h2>
            <div class="card-container">
                <div class="component-card" id="motorCard">
                    <div class="card-icon">‚öôÔ∏è</div>
                    <h3>Motor</h3>
                    <div class="status-indicator">
                        <div class="status-badge normal">Normal</div>
                    </div>
                    <div class="health-meter">
                        <div class="meter-fill" style="width: 90%;"></div>
                    </div>
                    <div class="health-percentage">90%</div>
                </div>
                
                <div class="component-card" id="pulleyCard">
                    <div class="card-icon">üîÑ</div>
                    <h3>Pulley</h3>
                    <div class="status-indicator">
                        <div class="status-badge normal">Normal</div>
                    </div>
                    <div class="health-meter">
                        <div class="meter-fill" style="width: 85%;"></div>
                    </div>
                    <div class="health-percentage">85%</div>
                </div>
                
                <div class="component-card" id="beltCard">
                    <div class="card-icon">‚û∞</div>
                    <h3>Belt</h3>
                    <div class="status-indicator">
                        <div class="status-badge warning">Warning</div>
                    </div>
                    <div class="health-meter">
                        <div class="meter-fill warning" style="width: 60%;"></div>
                    </div>
                    <div class="health-percentage">60%</div>
                </div>
                
                <div class="component-card" id="bearingCard">
                    <div class="card-icon">‚ö™</div>
                    <h3>Bearing</h3>
                    <div class="status-indicator">
                        <div class="status-badge normal">Normal</div>
                    </div>
                    <div class="health-meter">
                        <div class="meter-fill" style="width: 95%;"></div>
                    </div>
                    <div class="health-percentage">95%</div>
                </div>
                
                <div class="component-card" id="gearCard">
                    <div class="card-icon">‚öôÔ∏è</div>
                    <h3>Gear</h3>
                    <div class="status-indicator">
                        <div class="status-badge faulty">Faulty</div>
                    </div>
                    <div class="health-meter">
                        <div class="meter-fill faulty" style="width: 35%;"></div>
                    </div>
                    <div class="health-percentage">35%</div>
                </div>
            </div>
        </section>

        <!-- Accelerometer Data Section -->
        <section id="accelerometer-section" class="accel-data-container">
            <h2 class="section-title">Accelerometer Data</h2>
            <div class="chart-container">
                <canvas id="accelChart"></canvas>
            </div>
            <div class="data-controls">
                <button id="pauseBtn" class="control-btn">Pause</button>
                <button id="resumeBtn" class="control-btn">Resume</button>
                <button id="clearBtn" class="control-btn">Clear</button>
            </div>
        </section>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize the chart with static random data
            initStaticChart();

            // Animate component cards on page load
            setTimeout(() => {
                animateComponentCards();
            }, 300);

            // Smooth scrolling for navigation
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    
                    if (targetElement) {
                        window.scrollTo({
                            top: targetElement.offsetTop - 70,
                            behavior: 'smooth'
                        });
                    }
                });
            });

            // Initialize static chart
            function initStaticChart() {
                const ctx = document.getElementById('accelChart').getContext('2d');
                
                // Generate random data for static display
                const dataPoints = 100;
                const xData = generateRandomWaveform(dataPoints, 0.7);
                const yData = generateRandomWaveform(dataPoints, 0.5);
                const zData = generateRandomWaveform(dataPoints, 0.3);
                
                // Chart configuration
                const chart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: Array(dataPoints).fill(''),
                        datasets: [
                            {
                                label: 'X-Axis',
                                data: xData,
                                borderColor: 'rgba(231, 76, 60, 1)',
                                backgroundColor: 'rgba(231, 76, 60, 0.1)',
                                borderWidth: 2,
                                tension: 0.4,
                                pointRadius: 0,
                                fill: true
                            },
                            {
                                label: 'Y-Axis',
                                data: yData,
                                borderColor: 'rgba(46, 204, 113, 1)',
                                backgroundColor: 'rgba(46, 204, 113, 0.1)',
                                borderWidth: 2,
                                tension: 0.4,
                                pointRadius: 0,
                                fill: true
                            },
                            {
                                label: 'Z-Axis',
                                data: zData,
                                borderColor: 'rgba(52, 152, 219, 1)',
                                backgroundColor: 'rgba(52, 152, 219, 0.1)',
                                borderWidth: 2,
                                tension: 0.4,
                                pointRadius: 0,
                                fill: true
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        animation: {
                            duration: 0
                        },
                        scales: {
                            y: {
                                beginAtZero: false,
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: 'rgba(255, 255, 255, 0.7)'
                                }
                            },
                            x: {
                                grid: {
                                    display: false
                                },
                                ticks: {
                                    display: false
                                }
                            }
                        },
                        plugins: {
                            legend: {
                                position: 'top',
                                labels: {
                                    color: 'rgba(255, 255, 255, 0.7)',
                                    padding: 20,
                                    font: {
                                        size: 14
                                    }
                                }
                            },
                            tooltip: {
                                enabled: false
                            }
                        }
                    }
                });
                
                // Store chart in window for access by control buttons
                window.accelChart = chart;
            }
            
            // Generate a random waveform with sine components and noise
            function generateRandomWaveform(length, amplitude) {
                const result = [];
                
                for (let i = 0; i < length; i++) {
                    // Base sine wave with random frequency
                    const freqFactor1 = 0.1;
                    const freqFactor2 = 0.05;
                    const freqFactor3 = 0.02;
                    
                    // Combine multiple sine waves with different frequencies and phases
                    let value = 
                        amplitude * 0.6 * Math.sin(i * freqFactor1 + Math.random()) +
                        amplitude * 0.3 * Math.sin(i * freqFactor2 + 0.5) +
                        amplitude * 0.2 * Math.sin(i * freqFactor3 + 1.5);
                    
                    // Add some random noise
                    value += (Math.random() - 0.5) * amplitude * 0.3;
                    
                    result.push(value);
                }
                
                return result;
            }
            
            // Function to animate component cards
            function animateComponentCards() {
                const cards = document.querySelectorAll('.component-card');
                
                cards.forEach((card, index) => {
                    // Set initial state
                    card.style.opacity = '0';
                    card.style.transform = 'translateY(30px)';
                    
                    // Animate with delay based on index
                    setTimeout(() => {
                        card.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                        card.style.opacity = '1';
                        card.style.transform = 'translateY(0)';
                    }, 100 * index);
                });
            }
            
            // Control buttons functionality
            const pauseBtn = document.getElementById('pauseBtn');
            const resumeBtn = document.getElementById('resumeBtn');
            const clearBtn = document.getElementById('clearBtn');
            
            if (pauseBtn) {
                pauseBtn.addEventListener('click', function() {
                    showNotification('Data stream paused', 'success');
                });
            }
            
            if (resumeBtn) {
                resumeBtn.addEventListener('click', function() {
                    showNotification('Data stream resumed', 'success');
                });
            }
            
            if (clearBtn) {
                clearBtn.addEventListener('click', function() {
                    if (window.accelChart && window.accelChart.data && window.accelChart.data.datasets) {
                        // Generate new random data for all datasets
                        const dataPoints = window.accelChart.data.datasets[0].data.length;
                        
                        window.accelChart.data.datasets[0].data = generateRandomWaveform(dataPoints, 0.7);
                        window.accelChart.data.datasets[1].data = generateRandomWaveform(dataPoints, 0.5);
                        window.accelChart.data.datasets[2].data = generateRandomWaveform(dataPoints, 0.3);
                        
                        window.accelChart.update();
                        showNotification('Chart data regenerated', 'success');
                    }
                });
            }
            
            // Function to show notification
            function showNotification(message, type) {
                // Create notification element
                const notification = document.createElement('div');
                notification.className = `notification ${type}`;
                notification.textContent = message;
                
                // Add to DOM
                document.body.appendChild(notification);
                
                // Add animation class after a brief delay (for transition)
                setTimeout(() => {
                    notification.classList.add('show');
                }, 10);
                
                // Remove after 3 seconds
                setTimeout(() => {
                    notification.classList.remove('show');
                    setTimeout(() => {
                        notification.remove();
                    }, 300);
                }, 3000);
            }
        });
    </script>
</body>
</html>